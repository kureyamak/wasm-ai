!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(self,(()=>(()=>{"use strict";var t={986:(t,e,n)=>{n.d(e,{debug:()=>r});const r=new class{enable(t){this.log=function(t,e){return t?console.log.bind(console,"%c%s","color: #265BA0",e):()=>{}}(void 0===t||t,this.prefix)}get enabled(){return this.isEnabled}constructor(t){this.isEnabled=t,this.prefix="wasi:",this.enable(t)}}(!1)},851:(t,e,n)=>{n.d(e,{Fd:()=>i});var r=n(228);class i{fd_advise(t,e,n){return r.ERRNO_NOTSUP}fd_allocate(t,e){return r.ERRNO_NOTSUP}fd_close(){return 0}fd_datasync(){return r.ERRNO_NOTSUP}fd_fdstat_get(){return{ret:r.ERRNO_NOTSUP,fdstat:null}}fd_fdstat_set_flags(t){return r.ERRNO_NOTSUP}fd_fdstat_set_rights(t,e){return r.ERRNO_NOTSUP}fd_filestat_get(){return{ret:r.ERRNO_NOTSUP,filestat:null}}fd_filestat_set_size(t){return r.ERRNO_NOTSUP}fd_filestat_set_times(t,e,n){return r.ERRNO_NOTSUP}fd_pread(t,e,n){return{ret:r.ERRNO_NOTSUP,nread:0}}fd_prestat_get(){return{ret:r.ERRNO_NOTSUP,prestat:null}}fd_prestat_dir_name(){return{ret:r.ERRNO_NOTSUP,prestat_dir_name:null}}fd_pwrite(t,e,n){return{ret:r.ERRNO_NOTSUP,nwritten:0}}fd_read(t,e){return{ret:r.ERRNO_NOTSUP,nread:0}}fd_readdir_single(t){return{ret:r.ERRNO_NOTSUP,dirent:null}}fd_seek(t,e){return{ret:r.ERRNO_NOTSUP,offset:0n}}fd_sync(){return 0}fd_tell(){return{ret:r.ERRNO_NOTSUP,offset:0n}}fd_write(t,e){return{ret:r.ERRNO_NOTSUP,nwritten:0}}path_create_directory(t){return r.ERRNO_NOTSUP}path_filestat_get(t,e){return{ret:r.ERRNO_NOTSUP,filestat:null}}path_filestat_set_times(t,e,n,i,s){return r.ERRNO_NOTSUP}path_link(t,e,n,i){return r.ERRNO_NOTSUP}path_open(t,e,n,i,s,_){return{ret:r.ERRNO_NOTSUP,fd_obj:null}}path_readlink(t){return{ret:r.ERRNO_NOTSUP,data:null}}path_remove_directory(t){return r.ERRNO_NOTSUP}path_rename(t,e,n){return r.ERRNO_NOTSUP}path_symlink(t,e){return r.ERRNO_NOTSUP}path_unlink_file(t){return r.ERRNO_NOTSUP}}},228:(t,e,n)=>{n.d(e,{Dirent:()=>p,ERRNO_BADF:()=>i,ERRNO_EXIST:()=>s,ERRNO_INVAL:()=>_,ERRNO_ISDIR:()=>l,ERRNO_NOENT:()=>a,ERRNO_NOTDIR:()=>f,ERRNO_NOTEMPTY:()=>o,ERRNO_NOTSUP:()=>d,ERRNO_PERM:()=>h,ERRNO_SUCCESS:()=>r,FDFLAGS_APPEND:()=>b,FILETYPE_CHARACTER_DEVICE:()=>N,FILETYPE_DIRECTORY:()=>O,FILETYPE_REGULAR_FILE:()=>g,Fdstat:()=>S,Filestat:()=>F,OFLAGS_CREAT:()=>T,OFLAGS_DIRECTORY:()=>y,OFLAGS_EXCL:()=>I,OFLAGS_TRUNC:()=>U,Prestat:()=>L,RIGHTS_FD_WRITE:()=>u,WHENCE_CUR:()=>E,WHENCE_END:()=>c,WHENCE_SET:()=>R});const r=0,i=8,s=20,_=28,l=31,a=44,f=54,o=55,d=58,h=63,u=64,R=0,E=1,c=2,N=2,O=3,g=4;class p{head_length(){return 24}name_length(){return this.dir_name.byteLength}write_head_bytes(t,e){t.setBigUint64(e,this.d_next,!0),t.setBigUint64(e+8,this.d_ino,!0),t.setUint32(e+16,this.dir_name.length,!0),t.setUint8(e+20,this.d_type)}write_name_bytes(t,e,n){t.set(this.dir_name.slice(0,Math.min(this.dir_name.byteLength,n)),e)}constructor(t,e,n){this.d_ino=1n;const r=(new TextEncoder).encode(e);this.d_next=t,this.d_namlen=r.byteLength,this.d_type=n,this.dir_name=r}}const b=1;class S{write_bytes(t,e){t.setUint8(e,this.fs_filetype),t.setUint16(e+2,this.fs_flags,!0),t.setBigUint64(e+8,this.fs_rights_base,!0),t.setBigUint64(e+16,this.fs_rights_inherited,!0)}constructor(t,e){this.fs_rights_base=0n,this.fs_rights_inherited=0n,this.fs_filetype=t,this.fs_flags=e}}const T=1,y=2,I=4,U=8;class F{write_bytes(t,e){t.setBigUint64(e,this.dev,!0),t.setBigUint64(e+8,this.ino,!0),t.setUint8(e+16,this.filetype),t.setBigUint64(e+24,this.nlink,!0),t.setBigUint64(e+32,this.size,!0),t.setBigUint64(e+38,this.atim,!0),t.setBigUint64(e+46,this.mtim,!0),t.setBigUint64(e+52,this.ctim,!0)}constructor(t,e){this.dev=0n,this.ino=0n,this.nlink=0n,this.atim=0n,this.mtim=0n,this.ctim=0n,this.filetype=t,this.size=e}}class C{write_bytes(t,e){t.setUint32(e,this.pr_name_len,!0)}constructor(t){this.pr_name_len=t}}class L{static dir(t){const e=new L;return e.tag=0,e.inner=new C(t),e}write_bytes(t,e){t.setUint32(e,this.tag,!0),this.inner.write_bytes(t,e+4)}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,n),s.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{n.r(r),n.d(r,{ConsoleStdout:()=>h,Directory:()=>d,File:()=>f,OpenDirectory:()=>l,OpenFile:()=>s,OpenSyncOPFSFile:()=>_,PreopenDirectory:()=>a,SyncOPFSFile:()=>o});var t=n(986),e=n(228),i=n(851);class s extends i.Fd{fd_fdstat_get(){return{ret:0,fdstat:new e.Fdstat(e.FILETYPE_REGULAR_FILE,0)}}fd_read(t,e){let n=0;for(const r of e){if(!(this.file_pos<this.file.data.byteLength))break;{const e=this.file.data.slice(Number(this.file_pos),Number(this.file_pos+BigInt(r.buf_len)));t.set(e,r.buf),this.file_pos+=BigInt(e.length),n+=e.length}}return{ret:0,nread:n}}fd_pread(t,e,n){let r=0;for(const i of e){if(!(n<this.file.data.byteLength))break;{const e=this.file.data.slice(Number(n),Number(n+BigInt(i.buf_len)));t.set(e,i.buf),n+=BigInt(e.length),r+=e.length}}return{ret:0,nread:r}}fd_seek(t,n){let r;switch(n){case e.WHENCE_SET:r=t;break;case e.WHENCE_CUR:r=this.file_pos+t;break;case e.WHENCE_END:r=BigInt(this.file.data.byteLength)+t;break;default:return{ret:e.ERRNO_INVAL,offset:0n}}return r<0?{ret:e.ERRNO_INVAL,offset:0n}:(this.file_pos=r,{ret:0,offset:this.file_pos})}fd_tell(){return{ret:0,offset:this.file_pos}}fd_write(t,n){let r=0;if(this.file.readonly)return{ret:e.ERRNO_BADF,nwritten:r};for(const e of n){const n=t.slice(e.buf,e.buf+e.buf_len);if(this.file_pos+BigInt(n.byteLength)>this.file.size){const t=this.file.data;this.file.data=new Uint8Array(Number(this.file_pos+BigInt(n.byteLength))),this.file.data.set(t)}this.file.data.set(n.slice(0,Number(this.file.size-this.file_pos)),Number(this.file_pos)),this.file_pos+=BigInt(n.byteLength),r+=e.buf_len}return{ret:0,nwritten:r}}fd_pwrite(t,n,r){let i=0;if(this.file.readonly)return{ret:e.ERRNO_BADF,nwritten:i};for(const e of n){const n=t.slice(e.buf,e.buf+e.buf_len);if(r+BigInt(n.byteLength)>this.file.size){const t=this.file.data;this.file.data=new Uint8Array(Number(r+BigInt(n.byteLength))),this.file.data.set(t)}this.file.data.set(n.slice(0,Number(this.file.size-r)),Number(r)),r+=BigInt(n.byteLength),i+=e.buf_len}return{ret:0,nwritten:i}}fd_filestat_get(){return{ret:0,filestat:this.file.stat()}}constructor(t){super(),this.file_pos=0n,this.file=t}}class _ extends i.Fd{fd_fdstat_get(){return{ret:0,fdstat:new e.Fdstat(e.FILETYPE_REGULAR_FILE,0)}}fd_filestat_get(){return{ret:0,filestat:new e.Filestat(e.FILETYPE_REGULAR_FILE,BigInt(this.file.handle.getSize()))}}fd_read(t,e){let n=0;for(const r of e){if(!(this.position<this.file.handle.getSize()))break;{const e=new Uint8Array(t.buffer,r.buf,r.buf_len),i=this.file.handle.read(e,{at:Number(this.position)});this.position+=BigInt(i),n+=i}}return{ret:0,nread:n}}fd_seek(t,n){let r;switch(n){case e.WHENCE_SET:r=BigInt(t);break;case e.WHENCE_CUR:r=this.position+BigInt(t);break;case e.WHENCE_END:r=BigInt(this.file.handle.getSize())+BigInt(t);break;default:return{ret:e.ERRNO_INVAL,offset:0n}}return r<0?{ret:e.ERRNO_INVAL,offset:0n}:(this.position=r,{ret:e.ERRNO_SUCCESS,offset:this.position})}fd_write(t,n){let r=0;if(this.file.readonly)return{ret:e.ERRNO_BADF,nwritten:r};for(const e of n){const n=new Uint8Array(t.buffer,e.buf,e.buf_len),i=this.file.handle.write(n,{at:Number(this.position)});this.position+=BigInt(i),r+=i}return{ret:e.ERRNO_SUCCESS,nwritten:r}}fd_datasync(){return this.file.handle.flush(),e.ERRNO_SUCCESS}fd_sync(){return this.fd_datasync()}fd_close(){return e.ERRNO_SUCCESS}constructor(t){super(),this.position=0n,this.file=t}}class l extends i.Fd{fd_fdstat_get(){return{ret:0,fdstat:new e.Fdstat(e.FILETYPE_DIRECTORY,0)}}fd_readdir_single(n){if(t.debug.enabled&&(t.debug.log("readdir_single",n),t.debug.log(n,Object.keys(this.dir.contents))),t.debug.log(n,Object.keys(this.dir.contents).slice(Number(n))),n>=BigInt(Object.keys(this.dir.contents).length))return{ret:0,dirent:null};const r=Object.keys(this.dir.contents)[Number(n)],i=this.dir.contents[r];return{ret:0,dirent:new e.Dirent(n+1n,r,i.stat().filetype)}}path_filestat_get(t,n){const r=this.dir.get_entry_for_path(n);return null==r?{ret:e.ERRNO_NOENT,filestat:null}:{ret:0,filestat:r.stat()}}path_open(t,n,r,i,s,_){let l=this.dir.get_entry_for_path(n);if(null==l){if((r&e.OFLAGS_CREAT)!=e.OFLAGS_CREAT)return{ret:e.ERRNO_NOENT,fd_obj:null};l=this.dir.create_entry_for_path(n,(r&e.OFLAGS_DIRECTORY)==e.OFLAGS_DIRECTORY)}else if((r&e.OFLAGS_EXCL)==e.OFLAGS_EXCL)return{ret:e.ERRNO_EXIST,fd_obj:null};if((r&e.OFLAGS_DIRECTORY)==e.OFLAGS_DIRECTORY&&l.stat().filetype!==e.FILETYPE_DIRECTORY)return{ret:e.ERRNO_NOTDIR,fd_obj:null};if(l.readonly&&(i&BigInt(e.RIGHTS_FD_WRITE))==BigInt(e.RIGHTS_FD_WRITE))return{ret:e.ERRNO_PERM,fd_obj:null};if(!(l instanceof d)&&(r&e.OFLAGS_TRUNC)==e.OFLAGS_TRUNC){const t=l.truncate();if(t!=e.ERRNO_SUCCESS)return{ret:t,fd_obj:null}}return{ret:e.ERRNO_SUCCESS,fd_obj:l.open(_)}}path_create_directory(t){return this.path_open(0,t,e.OFLAGS_CREAT|e.OFLAGS_DIRECTORY,0n,0n,0).ret}path_unlink_file(t){t=this.clean_path(t);const n=this.dir.get_parent_dir_for_path(t),r=t.split("/"),i=r[r.length-1],s=this.dir.get_entry_for_path(t);return null===s?e.ERRNO_NOENT:s.stat().filetype===e.FILETYPE_DIRECTORY?e.ERRNO_ISDIR:(delete n.contents[i],e.ERRNO_SUCCESS)}path_remove_directory(t){t=this.clean_path(t);const n=this.dir.get_parent_dir_for_path(t),r=t.split("/"),i=r[r.length-1],s=this.dir.get_entry_for_path(t);return null===s?e.ERRNO_NOENT:s instanceof d&&s.stat().filetype===e.FILETYPE_DIRECTORY?0!==Object.keys(s.contents).length?e.ERRNO_NOTEMPTY:void 0===n.contents[i]?e.ERRNO_NOENT:(delete n.contents[i],e.ERRNO_SUCCESS):e.ERRNO_NOTDIR}clean_path(t){for(;t.length>0&&"/"===t[t.length-1];)t=t.slice(0,t.length-1);return t}constructor(t){super(),this.dir=t}}class a extends l{fd_prestat_get(){return{ret:0,prestat:e.Prestat.dir(this.prestat_name.length)}}fd_prestat_dir_name(){return{ret:0,prestat_dir_name:this.prestat_name}}constructor(t,e){super(new d(e)),this.prestat_name=(new TextEncoder).encode(t)}}class f{open(t){const n=new s(this);return t&e.FDFLAGS_APPEND&&n.fd_seek(0n,e.WHENCE_END),n}get size(){return BigInt(this.data.byteLength)}stat(){return new e.Filestat(e.FILETYPE_REGULAR_FILE,this.size)}truncate(){return this.readonly?e.ERRNO_PERM:(this.data=new Uint8Array([]),e.ERRNO_SUCCESS)}constructor(t,e){this.data=new Uint8Array(t),this.readonly=!!e?.readonly}}class o{open(t){const n=new _(this);return t&e.FDFLAGS_APPEND&&n.fd_seek(0n,e.WHENCE_END),n}get size(){return BigInt(this.handle.getSize())}stat(){return new e.Filestat(e.FILETYPE_REGULAR_FILE,this.size)}truncate(){return this.readonly?e.ERRNO_PERM:(this.handle.truncate(0),e.ERRNO_SUCCESS)}constructor(t,e){this.handle=t,this.readonly=!!e?.readonly}}class d{open(t){return new l(this)}stat(){return new e.Filestat(e.FILETYPE_DIRECTORY,0n)}get_entry_for_path(e){let n=this;for(const r of e.split("/")){if(""==r)break;if("."!=r){if(!(n instanceof d))return null;if(null==n.contents[r])return t.debug.log(r),null;n=n.contents[r]}}return n}get_parent_dir_for_path(e){if(""===e)return null;let n=this,r=n;for(const i of e.split("/")){if(""===i)break;if("."!==i){if(!(n instanceof d))return t.debug.log(n),null;if(void 0===n.contents[i])return t.debug.log(i),null;r=n,n=n.contents[i]}}return r}create_entry_for_path(e,n){let r=this;const i=e.split("/").filter((t=>"/"!=t));for(let e=0;e<i.length;e++){const s=i[e];if(!(r instanceof d))break;null!=r.contents[s]||(t.debug.log("create",s),e!=i.length-1||n?r.contents[s]=new d({}):r.contents[s]=new f(new ArrayBuffer(0))),r=r.contents[s]}return r}constructor(t){this.readonly=!1,this.contents=t}}class h extends i.Fd{fd_filestat_get(){return{ret:0,filestat:new e.Filestat(e.FILETYPE_CHARACTER_DEVICE,BigInt(0))}}fd_fdstat_get(){const t=new e.Fdstat(e.FILETYPE_CHARACTER_DEVICE,0);return t.fs_rights_base=BigInt(e.RIGHTS_FD_WRITE),{ret:0,fdstat:t}}fd_write(t,e){let n=0;for(const r of e){const e=t.slice(r.buf,r.buf+r.buf_len);this.write(e),n+=r.buf_len}return{ret:0,nwritten:n}}static lineBuffered(t){const e=new TextDecoder("utf-8",{fatal:!1});let n="";return new h((r=>{n+=e.decode(r,{stream:!0});const i=n.split("\n");for(const[e,r]of i.entries())e<i.length-1?t(r):n=r}))}constructor(t){super(),this.write=t}}})(),r})()));